# zkETHer Onboarding Flow - Wallet Connection & Setup

## ðŸš€ **App Launch Sequence**

### **Screen 1: Welcome Screen**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚         â—â—â—  zkETHer  â—â—â—       â”‚
â”‚                                 â”‚
â”‚     Private ETH Transfers       â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚ â† Animated dots
â”‚  â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚   Send ETH Unlinkably       â”‚ â”‚
â”‚  â”‚   Break Transaction Links   â”‚ â”‚
â”‚  â”‚   Protect Your Privacy      â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚         â— GET STARTED â—         â”‚
â”‚                                 â”‚
â”‚    [ Learn More ] [ Skip ]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 2: Connect Wallet**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Connect Your Wallet          â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  zkETHer needs access to your   â”‚
â”‚  Ethereum wallet for deposits   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ“± MetaMask Mobile          â”‚ â”‚
â”‚  â”‚    Most popular wallet      â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â”‚    [ CONNECT METAMASK ]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸŒˆ Rainbow Wallet           â”‚ â”‚
â”‚  â”‚    Beautiful & secure       â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â”‚    [ CONNECT RAINBOW ]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ”— WalletConnect            â”‚ â”‚
â”‚  â”‚    Other wallets            â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â”‚    [ SCAN QR CODE ]         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 3: Wallet Connection Process**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Connecting to MetaMask...      â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Please approve in MetaMask     â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     ðŸ“± MetaMask             â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  zkETHer wants to connect   â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  Permissions requested:     â”‚ â”‚
â”‚  â”‚  â€¢ View account address     â”‚ â”‚
â”‚  â”‚  â€¢ Request transaction      â”‚ â”‚
â”‚  â”‚    approval                 â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  [ CANCEL ] [ CONNECT ]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  This allows zkETHer to:        â”‚
â”‚  âœ“ Show your ETH balance        â”‚
â”‚  âœ“ Request deposit transactions â”‚
â”‚  âœ— Never access your private    â”‚
â”‚    keys or move funds without   â”‚
â”‚    your approval                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 4: Wallet Connected Successfully**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Wallet Connected             â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         âœ“ SUCCESS           â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  Connected to MetaMask      â”‚ â”‚
â”‚  â”‚  Address: 0x456abc...       â”‚ â”‚
â”‚  â”‚  Balance: 5.47 ETH          â”‚ â”‚ â† Shows actual balance
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Next: Generate your zkETHer    â”‚
â”‚  privacy keys                   â”‚
â”‚                                 â”‚
â”‚         â— CONTINUE â—            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 5: Generate zkETHer Keys**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Generate Privacy Keys        â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  zkETHer uses separate keys     â”‚
â”‚  for privacy (different from    â”‚
â”‚  your MetaMask keys)            â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ” Privacy Key Features:    â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ âœ“ Receive private notes     â”‚ â”‚
â”‚  â”‚ âœ“ Generate ZK proofs        â”‚ â”‚
â”‚  â”‚ âœ“ Unlinkable withdrawals    â”‚ â”‚
â”‚  â”‚ âœ“ Stored securely on device â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ âš ï¸ Keep these keys safe!    â”‚ â”‚
â”‚  â”‚ Lost keys = lost funds      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  [ BACKUP LATER ] â— GENERATE â— â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 6: Key Generation Process**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generating Privacy Keys...     â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Progress: 89% Complete         â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â—    â—    â—    â—    â—     â”‚ â”‚ â† Key generation visual
â”‚  â”‚    â—    â—    â—    â—    â—   â”‚ â”‚   (dots connecting)
â”‚  â”‚  â—    â—    â—    â—    â—     â”‚ â”‚
â”‚  â”‚    â—    â—    â—    â—    â—   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Current Step:                  â”‚
â”‚  âœ“ Random Entropy Generated     â”‚
â”‚  âœ“ Private Key Created          â”‚
â”‚  â— Public Key Deriving...       â”‚ â† Currently processing
â”‚  â—‹ Secure Storage               â”‚
â”‚                                 â”‚
â”‚  Creating your privacy          â”‚
â”‚  identity...                    â”‚
â”‚                                 â”‚
â”‚  Time remaining: ~2 seconds     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Screen 7: Setup Complete - Main Interface**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—â—â—  zkETHer  â—â—â—             â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚
â”‚  â”‚   â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚
â”‚  â”‚    0.00 ETH UNLINKABLE      â”‚ â”‚ â† zkETHer balance
â”‚  â”‚     â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Connected Wallet:              â”‚ â† Shows connected wallet
â”‚  ðŸ“± MetaMask (5.47 ETH)         â”‚
â”‚                                 â”‚
â”‚  Anonymity Set: 0 users         â”‚
â”‚  â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹ â”‚
â”‚  Be the first to deposit!       â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   â— DEPOSIT  â”‚ â”‚ â— WITHDRAW  â”‚ â”‚
â”‚  â”‚   (Public)   â”‚ â”‚ (Disabled)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Recent Activity                â”‚
â”‚  No recent activity             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”§ **Technical Implementation**

### **Wallet Connection Logic:**
```javascript
// App.js - Main component
import { WalletConnectModal } from '@walletconnect/modal-react-native';
import { useWalletConnect } from '@walletconnect/react-native-dapp';

export default function ZkETHerApp() {
    const [isWalletConnected, setIsWalletConnected] = useState(false);
    const [zkKeysGenerated, setZkKeysGenerated] = useState(false);
    const connector = useWalletConnect();

    // Check if user has completed onboarding
    useEffect(() => {
        checkOnboardingStatus();
    }, []);

    const checkOnboardingStatus = async () => {
        const walletConnected = await AsyncStorage.getItem('wallet_connected');
        const zkKeys = await AsyncStorage.getItem('zk_keys_generated');
        
        setIsWalletConnected(!!walletConnected);
        setZkKeysGenerated(!!zkKeys);
    };

    // Show appropriate screen based on onboarding status
    if (!isWalletConnected) {
        return <WalletConnectionFlow />;
    }
    
    if (!zkKeysGenerated) {
        return <ZkKeyGenerationFlow />;
    }
    
    return <MainZkETHerInterface />;
}
```

### **Wallet Integration:**
```javascript
// WalletService.js
class WalletService {
    async connectWallet() {
        try {
            const accounts = await connector.connect();
            const address = accounts[0];
            const balance = await this.getBalance(address);
            
            // Store connection status
            await AsyncStorage.setItem('wallet_connected', 'true');
            await AsyncStorage.setItem('wallet_address', address);
            
            return { address, balance };
        } catch (error) {
            throw new Error('Failed to connect wallet');
        }
    }
    
    async getBalance(address) {
        const balance = await connector.getBalance(address);
        return ethers.utils.formatEther(balance);
    }
}
```

### **zkETHer Key Generation:**
```javascript
// ZkKeyService.js
class ZkKeyService {
    async generateKeys() {
        // Generate cryptographically secure random private key
        const privateKey = crypto.getRandomValues(new Uint8Array(32));
        const publicKey = this.derivePublicKey(privateKey);
        
        // Encrypt and store securely
        const encryptedKeys = await this.encryptKeys(privateKey, publicKey);
        await AsyncStorage.setItem('zk_keys_generated', 'true');
        await AsyncStorage.setItem('zk_private_key', encryptedKeys.private);
        await AsyncStorage.setItem('zk_public_key', encryptedKeys.public);
        
        return { privateKey, publicKey };
    }
}
```

## ðŸŽ¯ **Key Design Decisions:**

1. **Wallet Connection First**: Users connect existing wallet before accessing zkETHer features
2. **Separate Key Generation**: zkETHer privacy keys are separate from wallet keys
3. **Balance Integration**: Show both MetaMask balance (for deposits) and zkETHer balance (unlinkable funds)
4. **Progressive Onboarding**: Step-by-step setup with clear explanations
5. **Security Emphasis**: Explain why separate keys are needed for privacy

## ðŸ“± **User Flow:**
```
App Launch â†’ Connect Wallet â†’ Generate zkETHer Keys â†’ Main Interface
     â†“              â†“                    â†“               â†“
  Welcome      MetaMask/Rainbow    Privacy Keys    zkETHer Features
```

This onboarding flow ensures users understand they're connecting an existing wallet (not creating a new one) while setting up the additional privacy infrastructure zkETHer needs.
