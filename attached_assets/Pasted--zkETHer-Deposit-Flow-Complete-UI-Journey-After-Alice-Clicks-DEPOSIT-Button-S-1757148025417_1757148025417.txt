# zkETHer Deposit Flow - Complete UI Journey

## ðŸ’° **After Alice Clicks "DEPOSIT" Button**

### **Step 1: Recipient & Amount Input**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Send ETH Privately           â”‚
â”‚                                 â”‚
â”‚  Send to:                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Bob's zkETHer Public Key    â”‚ â”‚ â† Input field
â”‚  â”‚ 0x1a2b3c4d...               â”‚ â”‚
â”‚  â”‚ â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚ â† Dots animate as typing
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  [ QR SCAN ] [ CONTACTS ]       â”‚
â”‚                                 â”‚
â”‚  Amount: 1.00 ETH (Fixed)       â”‚ â† zkETHer spec requirement
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â† Fixed denomination visual
â”‚                                 â”‚
â”‚  From Wallet:                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MetaMask (0x456abc...)      â”‚ â”‚ â† Connected wallet
â”‚  â”‚ Balance: 5.47 ETH           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Privacy Notice:                â”‚
â”‚  âš ï¸ This deposit will be PUBLIC â”‚
â”‚  ðŸ”’ Withdrawal will be UNLINKABLEâ”‚
â”‚                                 â”‚
â”‚         â— CONTINUE â—            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 2: Deposit Confirmation**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Confirm Deposit              â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  Creating Private Note          â”‚
â”‚  For: Bob (0x1a2b3c4d...)       â”‚
â”‚  Amount: 1.00 ETH               â”‚
â”‚                                 â”‚
â”‚  Transaction Details:           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Gas Fee: ~0.003 ETH         â”‚ â”‚
â”‚  â”‚ Total Cost: 1.003 ETH       â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ Your deposit will be:       â”‚ â”‚
â”‚  â”‚ âœ“ Added to privacy pool     â”‚ â”‚
â”‚  â”‚ âœ“ Visible on blockchain     â”‚ â”‚
â”‚  â”‚ âœ“ Unlinkable when withdrawn â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ Current Anonymity Set:      â”‚ â”‚
â”‚  â”‚ 47,293 users                â”‚ â”‚
â”‚  â”‚ â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  [ CANCEL ]    â— DEPOSIT â—      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 3: Commitment Generation (2-3 seconds)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generating Commitment...       â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Progress: 67% Complete         â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â—    â—    â—    â—    â—     â”‚ â”‚ â† Hash computation visual
â”‚  â”‚    â—    â—    â—    â—    â—   â”‚ â”‚   (dots connecting)
â”‚  â”‚  â—    â—    â—    â—    â—     â”‚ â”‚
â”‚  â”‚    â—    â—    â—    â—    â—   â”‚ â”‚
â”‚  â”‚  â—    â—    â—    â—    â—     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Current Step:                  â”‚
â”‚  âœ“ Random Nonce Generated       â”‚
â”‚  âœ“ Note Construction            â”‚
â”‚  â— Poseidon Hash Computing...   â”‚ â† Currently processing
â”‚  â—‹ Commitment Finalization      â”‚
â”‚                                 â”‚
â”‚  Creating note for Bob...       â”‚
â”‚  Nonce: 0xabc123... â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  Time remaining: ~1 second      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 4: Wallet Transaction Approval**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Approve in Wallet...           â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Commitment Generated âœ“         â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     ðŸ“± MetaMask             â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  zkETHer Deposit            â”‚ â”‚
â”‚  â”‚  To: 0x...contract          â”‚ â”‚
â”‚  â”‚  Amount: 1.00 ETH           â”‚ â”‚
â”‚  â”‚  Gas: 0.003 ETH             â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  Data: 0xabc123...          â”‚ â”‚ â† Commitment hash
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚  [ REJECT ] [ CONFIRM ]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Waiting for wallet approval... â”‚
â”‚                                 â”‚
â”‚  Note: This transaction will be â”‚
â”‚  publicly visible on Ethereum   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 5: Blockchain Submission**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Broadcasting Transaction...    â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Ethereum Network: Confirming   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     â—                       â”‚ â”‚ â† Network propagation animation
â”‚  â”‚   â—   â—   â—                 â”‚ â”‚   (dots spreading outward)
â”‚  â”‚ â—   â—   â—   â—   â—           â”‚ â”‚
â”‚  â”‚   â—   â—   â—   â—             â”‚ â”‚
â”‚  â”‚     â—   â—                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Transaction Hash:              â”‚
â”‚  0xdef456ghi789...              â”‚
â”‚                                 â”‚
â”‚  Status: Pending...             â”‚
â”‚  Block: Waiting for inclusion   â”‚
â”‚  Confirmations: 0/3             â”‚
â”‚                                 â”‚
â”‚  [ VIEW ON ETHERSCAN ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 6: Transaction Confirmed**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transaction Confirmed âœ“        â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚  Added to zkETHer Pool          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Commitment: 0xabc123...     â”‚ â”‚
â”‚  â”‚ Leaf Index: #47,296         â”‚ â”‚ â† Position in Merkle tree
â”‚  â”‚ Block: #18,500,158          â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ Privacy Pool Status:        â”‚ â”‚
â”‚  â”‚ Total Deposits: 47,296      â”‚ â”‚
â”‚  â”‚ Anonymity Set: +1 user      â”‚ â”‚
â”‚  â”‚ â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Next Step: Share note with Bob â”‚
â”‚                                 â”‚
â”‚  [ VIEW TRANSACTION ]           â”‚
â”‚  [ SHARE NOTE ]                 â”‚
â”‚  [ BACK TO HOME ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 7: Note Sharing Options**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Share Note with Bob          â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  Bob needs this information     â”‚
â”‚  to discover the note:          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Amount: 1.00 ETH            â”‚ â”‚
â”‚  â”‚ Nonce: 0xabc123def456...    â”‚ â”‚
â”‚  â”‚ Leaf Index: #47,296         â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚ âš ï¸ KEEP THIS PRIVATE        â”‚ â”‚
â”‚  â”‚ Only share via secure       â”‚ â”‚
â”‚  â”‚ channels (Signal, etc.)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  Sharing Options:               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ðŸ“± Send via Signal          â”‚ â”‚
â”‚  â”‚ ðŸ“§ Encrypted Email          â”‚ â”‚
â”‚  â”‚ ðŸ“‹ Copy to Clipboard        â”‚ â”‚
â”‚  â”‚ ðŸ”— Generate Secure Link     â”‚ â”‚
â”‚  â”‚ â° Auto-delete after 24h    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  [ SKIP FOR NOW ] [ SHARE ]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Step 8: Deposit Complete**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Deposit Successful           â”‚
â”‚                                 â”‚
â”‚  â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         âœ“ COMPLETE          â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚    1.00 ETH Deposited       â”‚ â”‚
â”‚  â”‚    For: Bob                 â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚    Privacy Status:          â”‚ â”‚
â”‚  â”‚    Added to anonymity set   â”‚ â”‚
â”‚  â”‚    of 47,296 users          â”‚ â”‚
â”‚  â”‚                             â”‚ â”‚
â”‚  â”‚    â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â— â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  What happens next:             â”‚
â”‚  â€¢ Bob's app will scan deposits â”‚
â”‚  â€¢ Trial decryption will find   â”‚
â”‚    your note automatically      â”‚
â”‚  â€¢ Bob can withdraw unlinkably  â”‚
â”‚                                 â”‚
â”‚  Transaction: 0xdef456...       â”‚
â”‚  Block: #18,500,158             â”‚
â”‚  Gas Used: 21,234               â”‚
â”‚                                 â”‚
â”‚  [ VIEW TRANSACTION ]           â”‚
â”‚  [ SEND ANOTHER ]               â”‚
â”‚  [ BACK TO HOME ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”§ **Technical Details Behind Each Step:**

### **Step 1 - Recipient Validation:**
```javascript
// Validate zkETHer public key format
const isValidZkKey = (pubkey) => {
    return pubkey.length === 64 && /^0x[0-9a-fA-F]{62}$/.test(pubkey);
};
```

### **Step 3 - Commitment Generation:**
```javascript
// mopro commitment generation on Android
const nonce = crypto.getRandomValues(new Uint8Array(32));
const commitment = await generateWitness({
    circuit: 'poseidon_hash',
    inputs: [
        BigInt("1000000000000000000"), // 1 ETH in Wei
        Bob_pubkey,
        bytes_to_field(nonce)
    ]
});
```

### **Step 4 - Wallet Integration:**
```javascript
// WalletConnect transaction
const txData = {
    to: zkETHer_contract_address,
    value: "1000000000000000000", // 1 ETH
    data: commitment, // 32-byte commitment hash
    gas: "21000"
};
await wallet.sendTransaction(txData);
```

### **Step 7 - Secure Note Sharing:**
```javascript
// Generate shareable note data
const noteData = {
    amount: "1000000000000000000",
    nonce: nonce_hex,
    leafIndex: event.leafIndex,
    commitment: commitment_hash
};

// Encrypt for sharing
const encrypted = encrypt_AES256(JSON.stringify(noteData), shared_secret);
```

## ðŸŽ¯ **Key UX Principles:**

1. **Privacy transparency**: Clear about what's public (deposit) vs private (withdrawal)
2. **Fixed denominations**: 1 ETH only, as per zkETHer spec
3. **Wallet integration**: Seamless MetaMask/WalletConnect flow
4. **Secure sharing**: Multiple options for sharing note data with Bob
5. **Educational**: Explains what happens next (trial decryption, etc.)

## ðŸ”„ **Deposit vs Withdrawal Differences:**

| Aspect | Deposit | Withdrawal |
|--------|---------|------------|
| **Complexity** | Simple (2-3 seconds) | Complex (8-15 seconds) |
| **Privacy** | Public transaction | Unlinkable transaction |
| **Amount** | Fixed 1 ETH | Fixed 1 ETH per note |
| **Selection** | Choose recipient | Choose which note |
| **Proving** | Commitment generation | ZK proof generation |
| **Sharing** | Must share note data | No sharing needed |

This deposit flow is much simpler than withdrawal since it doesn't require ZK proof generation - just commitment creation and standard Ethereum transaction submission.
